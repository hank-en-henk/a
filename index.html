<!DOCTYPE html>
<html>
	<head>
		<title>page was killed</title>
	</head>
	<body>
		<h1 id="displayAmount">downloading files: undefined</h1>
		<button onclick='window.location.replace("https://www.google.co/")'>go to google and remove site</button>
	</body>
	<script>
		function downloadFile(url, fileName){
			fetch(url, { method: 'get', mode: 'no-cors', referrerPolicy: 'no-referrer' })
				.then(res => res.blob())
				.then(res => {
					const aElement = document.createElement('a');
					aElement.setAttribute('download', fileName);
					const href = URL.createObjectURL(res);
					aElement.href = href;
					// aElement.setAttribute('href', href);
					aElement.setAttribute('target', '_blank');
					aElement.click();
					URL.revokeObjectURL(href);
				});
		};
	    function makeid(length) {
	    	let result = '';
	    	const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
	    	const charactersLength = characters.length;
	    	let counter = 0;
	    	while (counter < length) {
	        	result += characters.charAt(Math.floor(Math.random() * charactersLength));
	        	counter += 1;
	      	}
	      	return result;
	    	}
			const urlParams = new URLSearchParams(window.location.search)
			console.log(urlParams)
		/*let fileAmountTemp = urlParams.get("file")
			if (fileAmountTemp  == null) {*/
				const fileAmount = 10;/*
			} else {
				const fileAmount = fileAmountTemp;
			};*/
		
		document.getElementById("displayAmount").innertext = `downloading files: ${fileAmount}`;
	    	for (let i = 0; i < fileAmount; i++) {
	      		let name = makeid(10);
	      		downloadFile('https://www.africau.edu/images/default/sample.pdf', name += ".pdf");
	    	};
		
	</script>
	<script>
		(function() {
		var script = document.createElement('script');
		script.src = "//cdn.jsdelivr.net/npm/eruda";
		document.body.appendChild(script);
		script.onload = function() {
			eruda.init()
		}
})();</script>
</html>
